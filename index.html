<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>オフセット時刻計算</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        select, input { margin: 10px; padding: 5px; }
        h3 { margin-top: 20px; }
    </style>
</head>
<body>

    <h2>オフセット時刻計算</h2>

    <label for="offsetSelect">プリセットオフセット:</label>
    <select id="offsetSelect">
        <option value="0">00:00:00</option>
        <option value="300">00:05:00</option>
        <option value="900">00:15:00</option>
        <option value="1800">00:30:00</option>
    </select>

    <br>

    <label for="extraOffset">追加オフセット (秒):</label>
    <input type="number" id="extraOffset" value="0" min="0">

    <br>

    <label for="playTime">再生時刻 (hh:mm:ss):</label>
    <input type="time" id="playTime" step="1">

    <h3>結果: <span id="result">--:--:--</span></h3>

    <script>
        function calculateTime() {
            let presetOffset = parseInt(document.getElementById("offsetSelect").value);
            let extraOffset = parseInt(document.getElementById("extraOffset").value) || 0;
            let totalOffset = presetOffset + extraOffset;

            let playTimeStr = document.getElementById("playTime").value;

            if (!playTimeStr) {
                document.getElementById("result").textContent = "--:--:--";
                return;
            }

            let [hours, minutes, seconds] = playTimeStr.split(":").map(Number);
            let playTimeInSeconds = hours * 3600 + minutes * 60 + seconds;
            let adjustedTimeInSeconds = playTimeInSeconds - totalOffset;
            
            let adjustedHours = Math.floor(adjustedTimeInSeconds / 3600);
            let adjustedMinutes = Math.floor((adjustedTimeInSeconds % 3600) / 60);
            let adjustedSeconds = adjustedTimeInSeconds % 60;

            document.getElementById("result").textContent = 
                `${String(adjustedHours).padStart(2, '0')}:${String(adjustedMinutes).padStart(2, '0')}:${String(adjustedSeconds).padStart(2, '0')}`;
        }

        document.getElementById("offsetSelect").addEventListener("change", calculateTime);
        document.getElementById("extraOffset").addEventListener("input", calculateTime);
        document.getElementById("playTime").addEventListener("input", calculateTime);
    </script>

</body>
</html>
